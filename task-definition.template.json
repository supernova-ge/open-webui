{
	"family": "widget-$APP_ENV",
	"taskRoleArn": "arn:aws:iam::891377043594:role/ecsTaskRole",
	"executionRoleArn": "arn:aws:iam::891377043594:role/ecsTaskExecutionRole",
	"requiresCompatibilities": [
		"EC2"
	],
	"containerDefinitions": [
		{
			"name": "widget-$APP_ENV",
			"image": "339713182600.dkr.ecr.eu-west-1.amazonaws.com/widget-$APP_ENV:$IMAGE_TAG",
			"essential": true,
			"portMappings": [
				{
					"containerPort": 8080,
					"hostPort": 8080,
					"protocol": "tcp"
				}
			],
			"extraHosts": [
				{
					"hostname": "host.docker.internal",
					"ipAddress": "host-gateway"
				}
			],
			"mountPoints": [
				{
					"sourceVolume": "app-backend-data",
					"containerPath": "/app/backend/data"
				}
			],
			"environment": [
				{
					"name": "DATABASE_URL",
					"value": "$DATABASE_URL"
				},
				{
					"name": "DATABASE_POOL_SIZE",
					"value": "5"
				},
				{
					"name": "OPENAI_API_BASE_URL",
					"value": "https://api.openai.com/v1"
				},
				{
					"name": "OPENAI_API_KEY",
					"value": "$OPENAI_API_KEY"
				},
				{
					"name": "ENABLE_OLLAMA_API",
					"value": "false"
				},
				{
					"name": "SCARF_NO_ANALYTICS",
					"value": "true"
				},
				{
					"name": "DO_NOT_TRACK",
					"value": "true"
				},
				{
					"name": "ANONYMIZED_TELEMETRY",
					"value": "false"
				}
			],
			"memory": 904,
			"cpu": 2048,
			"logConfiguration": {
				"logDriver": "awslogs",
				"options": {
					"awslogs-group": "/ecs/tiny-llm-course-widget-$APP_ENV",
					"awslogs-create-group": "true",
					"awslogs-region": "eu-west-1",
					"awslogs-stream-prefix": "ecs"
				}
			}
		}
	],
	"volumes": [
		{
			"name": "app-backend-data",
			"host": {
				"sourcePath": "widget-$APP_ENV"
			}
		}
	]
}